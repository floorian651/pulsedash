{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"indexmd","text":""},{"location":"dev/CONTRIBUTING/","title":"Guide de contribution","text":""},{"location":"dev/CONTRIBUTING/#mettre-a-jour-la-documentation","title":"Mettre \u00e0 jour la documentation","text":"<ol> <li>Cr\u00e9er une branche temporaire</li> </ol> <pre><code>git checkout -b modif-intro\n</code></pre> <ol> <li>R\u00e9aliser vos modifications</li> <li>R\u00e9digez votre documentation.</li> <li>Faites vos commits.</li> <li>Pousser la branche</li> </ol> <pre><code>git push origin modif-intro\n</code></pre> <ol> <li>Ouvrir une Pull Request (PR)</li> <li>Sur GitHub, proposez de fusionner <code>modif-intro</code> vers <code>documentation</code>.</li> <li>Fusionner (Merge)</li> <li>Une fois la PR valid\u00e9e, cliquez sur Merge.</li> </ol> <p>\u2139\ufe0f Note : Le clic sur Merge d\u00e9clenche GitHub Actions (un merge est techniquement un push sur la branche).</p>"},{"location":"dev/architecture/","title":"Architecture","text":"<pre><code>%%{init: {'themeVariables': { 'fontFamily': 'Roboto', 'fontSize': '14px'}, 'flowchart': { 'curve': 'monotoneX' } } }%%\nflowchart LR\n  subgraph Client [ Zone Client ]\n    Unity([\"fa:fa-gamepad Unity Client\"])\n  end\n\n  subgraph API_Service [ Service Web ]\n    API[\"fa:fa-server FastAPI\"]\n  end\n\n  subgraph Broker_Backend [ Broker &amp; \u00c9tat ]\n    Redis[(\"fa:fa-memory Redis (broker)\")]\n    Postgres[(\"fa:fa-database PostgreSQL\")]\n  end\n\n  subgraph Workers [ Traitement Asynchrone ]\n    Worker1{{\"fa:fa-cogs Worker A\"}}\n    Worker2{{\"fa:fa-cogs Worker B\"}}\n    Beat{{\"fa:fa-clock Beat\"}}\n  end\n\n  subgraph Storage [ Stockage Fichiers ]\n    MinIO[(\"fa:fa-hdd MinIO\")]\n  end\n\n  Unity --&gt;|\"HTTP POST\"| API\n  API --&gt;|\"enqueue\"| Redis\n  API -.-&gt;|\"direct (opt)\"| Worker1\n  Beat --&gt;|\"schedule\"| Redis\n  Redis --&gt;|\"deliver\"| Worker1\n  Redis --&gt;|\"deliver\"| Worker2\n  Worker1 --&gt;|\"pipeline\"| MinIO\n  Worker2 --&gt;|\"pipeline\"| MinIO\n  Worker1 --&gt;|\"meta\"| Postgres\n  Worker2 --&gt;|\"meta\"| Postgres\n  API --&gt;|\"read\"| Postgres\n  API --&gt;|\"serve\"| MinIO</code></pre> <pre><code>%%{init: {'themeVariables': { 'fontFamily': 'Fira Code, Consolas, Monaco, monospace', 'fontSize': '13px'}, 'flowchart': { 'curve': 'basis' } } }%%\nflowchart TD\n  subgraph Host [ Machine H\u00f4te ]\n    DockerEngine[\"fa:fa-docker Docker Engine\"]\n\n    subgraph ComposeStack [ Stack Docker Compose ]\n        direction TB\n\n        subgraph Compute [ Compute ]\n            app[\"fa:fa-server app (uvicorn)\"]\n            worker{{\"fa:fa-cogs celery_worker\"}}\n        end\n\n        subgraph DataServices [ Data Services ]\n            redis[(\"fa:fa-memory redis\")]\n            db[(\"fa:fa-database postgres\")]\n            minio[(\"fa:fa-hdd minio\")]\n        end\n    end\n\n    Volumes[(\"fa:fa-folder-open Volumes Persistants\")]\n  end\n\n  DockerEngine -.-&gt;|\"g\u00e8re\"| ComposeStack\n\n  app --&gt;|\"TCP :6379\"| redis\n  app --&gt;|\"TCP :5432\"| db\n  app --&gt;|\"TCP :9000\"| minio\n\n  worker --&gt;|\"TCP :6379\"| redis\n  worker --&gt;|\"TCP :9000\"| minio\n\n  db ===|\"mount\"| Volumes\n  minio ===|\"mount\"| Volumes</code></pre>"},{"location":"dev/gitconventions/","title":"test bestgitpractices","text":""},{"location":"dev/pipeline/","title":"Documentation du pipeline Python","text":"<p>Ce document d\u00e9crit la structure du pipeline Python pour l'analyse musicale et l'export des donn\u00e9es vers Unity.</p>"},{"location":"dev/pipeline/#arborescence-du-pipeline","title":"Arborescence du pipeline","text":""},{"location":"dev/pipeline/#srcpipeline-__init__py-configpy-contextpy-errorspy-pipelinepy-loaders-__init__py-audio_loaderpy-metadata_loaderpy-analyzers-__init__py-tempopy-energypy-spectrumpy-onsetspy-structurepy-processors-__init__py-quantizepy-smoothpy-thresholdpy-exporters-__init__py-json_exporterpy-binary_exporterpy","title":"<pre><code>src/pipeline/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 config.py\n\u251c\u2500\u2500 context.py\n\u251c\u2500\u2500 errors.py\n\u251c\u2500\u2500 pipeline.py\n\u251c\u2500\u2500 loaders/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 audio_loader.py\n\u2502   \u2514\u2500\u2500 metadata_loader.py\n\u251c\u2500\u2500 analyzers/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 tempo.py\n\u2502   \u251c\u2500\u2500 energy.py\n\u2502   \u251c\u2500\u2500 spectrum.py\n\u2502   \u251c\u2500\u2500 onsets.py\n\u2502   \u2514\u2500\u2500 structure.py\n\u251c\u2500\u2500 processors/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 quantize.py\n\u2502   \u251c\u2500\u2500 smooth.py\n\u2502   \u2514\u2500\u2500 threshold.py\n\u2514\u2500\u2500 exporters/\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 json_exporter.py\n    \u2514\u2500\u2500 binary_exporter.py\n</code></pre>","text":""},{"location":"dev/pipeline/#description-des-fichiers","title":"Description des fichiers","text":""},{"location":"dev/pipeline/#fichiers-principaux","title":"Fichiers principaux","text":"Fichier R\u00f4le <code>__init__.py</code> Rend le dossier <code>pipeline/</code> importable comme package Python. <code>config.py</code> Contient les param\u00e8tres globaux du pipeline (ex: seuils d\u2019\u00e9nergie, taille de fen\u00eatre pour l\u2019analyse audio, bpm par d\u00e9faut, chemins de fichiers\u2026). <code>context.py</code> Stocke le contexte d\u2019ex\u00e9cution pour chaque morceau analys\u00e9 (ex: nom du fichier, dur\u00e9e, sample rate). <code>errors.py</code> D\u00e9finition des exceptions personnalis\u00e9es pour g\u00e9rer les erreurs sp\u00e9cifiques au pipeline. <code>pipeline.py</code> Orchestrateur principal : charge les donn\u00e9es, ex\u00e9cute les analyses, applique les traitements, et exporte les r\u00e9sultats pour Unity."},{"location":"dev/pipeline/#dossier-loaders","title":"Dossier loaders/","text":"Fichier R\u00f4le <code>__init__.py</code> Rend le sous-dossier <code>loaders/</code> importable comme package. <code>audio_loader.py</code> Charge les fichiers audio (<code>.wav</code>, <code>.mp3</code>) et renvoie les samples + sample rate. <code>metadata_loader.py</code> Charge des m\u00e9tadonn\u00e9es suppl\u00e9mentaires pour le morceau (BPM connu, marqueurs, titres, artistes\u2026)."},{"location":"dev/pipeline/#dossier-analyzers","title":"Dossier analyzers/","text":"Fichier R\u00f4le <code>__init__.py</code> Rend le sous-dossier <code>analyzers/</code> importable comme package. <code>tempo.py</code> Analyse la musique pour d\u00e9tecter le BPM et la grille des beats. <code>energy.py</code> Calcule l\u2019\u00e9nergie (RMS, loudness) de la musique sur le temps. <code>spectrum.py</code> Analyse spectrale : d\u00e9coupe les fr\u00e9quences en bass, mid, high pour la lecture gameplay. <code>onsets.py</code> D\u00e9tecte les transitoires ou \"onsets\" (pics) dans la musique. <code>structure.py</code> D\u00e9tecte les sections musicales (intro, build, drop, break) pour structurer le gameplay."},{"location":"dev/pipeline/#dossier-processors","title":"Dossier processors/","text":"Fichier R\u00f4le <code>__init__.py</code> Rend le sous-dossier <code>processors/</code> importable comme package. <code>quantize.py</code> Aligne les \u00e9v\u00e9nements sur la grille rythmique ou sur le BPM d\u00e9tect\u00e9. <code>smooth.py</code> Lisse les courbes (\u00e9nergie, fr\u00e9quence) pour \u00e9viter des variations trop brusques. <code>threshold.py</code> D\u00e9tecte les \u00e9v\u00e9nements importants pour le gameplay (ex: seuil d\u2019\u00e9nergie d\u00e9clenchant un ennemi ou un effet)."},{"location":"dev/pipeline/#dossier-exporters","title":"Dossier exporters/","text":"Fichier R\u00f4le <code>__init__.py</code> Rend le sous-dossier <code>exporters/</code> importable comme package. <code>json_exporter.py</code> Exporte les donn\u00e9es analys\u00e9es et trait\u00e9es dans un format JSON lisible par Unity (<code>StreamingAssets/</code>). <code>binary_exporter.py</code> Optionnel : export en binaire pour am\u00e9liorer la performance ou r\u00e9duire la taille des fichiers."},{"location":"dev/pipeline/#exemple-de-flux-danalyse","title":"Exemple de flux d\u2019analyse","text":"<ul> <li> <p>pipeline.py charge un fichier audio avec audio_loader.py.</p> </li> <li> <p>Les analyzers (tempo.py, energy.py, onsets.py, etc.) extraient les features musicales.</p> </li> <li> <p>Les processors (quantize.py, threshold.py) pr\u00e9parent les donn\u00e9es pour le gameplay.</p> </li> <li> <p>Les exporters (json_exporter.py) \u00e9crivent les fichiers dans unity/Assets/StreamingAssets/.</p> </li> <li> <p>Unity lit la timeline et d\u00e9clenche les \u00e9v\u00e9nements du gameplay.</p> </li> </ul>"},{"location":"dev/setup/","title":"\u00c9tape 1 : Installation de Git sur votre machine","text":"<p>Windows</p> <p>Linux</p> <p>Cl\u00e9 ssh li\u00e9 \u00e0 votre profil</p>"},{"location":"dev/setup/#docker-desktop","title":"Docker Desktop","text":"<p>Windows: <pre><code>https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe?utm_source=docker&amp;utm_medium=webreferral&amp;utm_campaign=dd-smartbutton&amp;utm_location=module\n</code></pre></p>"},{"location":"dev/setup/#cloner-le-projet","title":"Cloner le projet","text":"<p>Via HTTPS <pre><code>git clone https://github.com/floorian651/wavr.git\n</code></pre></p> <p>Via SSH <pre><code>git clone git@github.com:floorian651/wavr.git\n</code></pre></p>"},{"location":"dev/setup/#extension-dev-containers","title":"Extension dev containers","text":""}]}